<div class="menu-tree p-3">
  <ul class="list-none">
    <ng-container *ngFor="let node of menu">
      <li class="py-1">
        <div
          class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-2 rounded"
          (click)="toggleExpand(node)"
        >
          <span *ngIf="node.children?.length" class="w-5 text-gray-500">
            {{ node.expanded ? 'ğŸ“‚' : 'ğŸ“' }}
          </span>
          <span *ngIf="!node.children?.length" class="w-5 text-gray-400">ğŸ“„</span>
          <span (click)="navigateTo(node)" class="flex-1">
            {{ node.title }}
          </span>

          <!-- Edit/Delete buttons for admin -->
          <button class="text-blue-600 text-xs" (click)="editNode(node); $event.stopPropagation()">âœï¸</button>
          <button class="text-red-600 text-xs" (click)="deleteNode(node); $event.stopPropagation()">ğŸ—‘</button>
        </div>

        <ul
          *ngIf="node.children?.length && node.expanded"
          class="ml-6 border-l border-gray-200 pl-3"
        >
          <ng-container *ngFor="let child of node.children">
            <li>
              <app-menu-node
                [node]="child"
                (navigate)="navigateTo($event)"
              ></app-menu-node>
            </li>
          </ng-container>
        </ul>
      </li>
    </ng-container>
  </ul>
</div>
